{"version":3,"sources":["bydidriksson/app/shop.cljs"],"mappings":";AAQA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAKA;AAGL,AAAA,AAAMC,AAAkBC;AAAxB,AACE,AAAAC,AAAA,AAAAC,AAAA;AAAA,AAAA,AAAAC,AAAA;AAAA,AAAA,AAAAC,AAAA,AAAAC,AAAA,AAAAC;AAAA,AAAA,AAAAC,AAAA,AAAAD,AAAA;AAAA,AAAA,AAAA,AAAAC,AAAA;AAAA,AAAAC,AAAA,AAAwBqB,AAAS7B,AAASF;AAA1CQ,AAAAA;AAAA,AAAA,AAAAG,AAAAH,AAAA,AAAAE;;AAAA,AAAA,AAAAD,AAAA;AAAA,AAAAG,AAAA,AAAAJ,AAAA;AAAAK,AAAA,AAAA,AAAAD;AAAAE,AAAA,AAAA,AAAAD,AACOmB,AAAMC,AAAYC;AADzB1B,AAAAA;AAAA,AAAA,AAAAO,AAAAP,AAAAM;;AAAA;;;;AAAA,AAAA;;;AAAA,AAAA,AAAAE,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA;AAAA,AAAA,AAAAA,AAAA,AAAAC;;AAAA,AAAAD,AAAA,AAAA;;AAAAA;;AAAAR;;AAAA,AAAA,AAAAU,AAAA,AAAA,AAAA;AAAA,AAAA,AAAAC,AAAA,AAAAZ,AAAAC;AAAA,AAAA,AAAA,AAAAY,AAAAD,AAAA;AAAA;;AAAAA;;;;AAAA,AAAAE,AAAAC;AAAA,AAAA,AAAAC,AAAAf;AAAA,AAAA,AAAAe,AAAA,AAAAF;;AAAAE;AAAA,AAAA,AAAAC,AAAA,AAAAhB,AAAA;AAAA,AAAAiB,AAAAjB;AAAA,AAAA,AAAAiB,AAAA,AAAA,AAAAC,AAAA,AAAAlB,AAAA;;AAAAiB;AAAA,AAAAJ;;;AAAA;;AAAA,AAAA,AAAA,AAAAD,AAAAF,AAAA;AAAA,AAAAV;;;;AAAAU;;;;;AAAAV;;;;;AAAAA;;;;;;;;;AAAAmB,AAAA,AAAAC,AAAA,AAAAtB;AAAA,AAAA,AAAAsB,AAAAC,AAAA,AAAA1B;;AAAAyB;;AAAA,AAAA,AAAAE,AAAAH;;;AAAAxB;;AAGF,AAAA,AAAMgC,AAAaC;AAAnB,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AACSA,AAC8C,AAAA,AAAe,AAAA,AAACC,AAAID,AAKhE,AAAA,AAAK,AAAA,AAAA,AAAAE,AAAWC,AAA0B,AAAA,AAACF,AAAID,AAKjD,AAAA,AAACC,AAAID,AAAgB,AAACI,AAE1B,AAAA,AAACH,AAAID,AACkC,AAAA,AAACC,AAAID,AACrB,AAAA,AAAK,AAAA,AAACC,AAAID;;AAEtC,AAAA,AAAMK,AAAcC;AAApB,AACE,AAAI,AAAA,AAAMA;AACR,AACE,AAACzC,AAAiB,AAAA,AAAA,AAAAqC,AAAWC;;AAD/B,AAAA,AAAA;;AAGA,AAACI,AAAIR,AAAYO;;;AAErB,AAAA,AAAME;AAAN,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAAA,AAIK,AAACH,AAAa,AAAA,AAAA,AAAAH,AAAcL","names":["bydidriksson.app.shop/request-opts","bydidriksson.app.shop/make-remote-call","endpoint","c__27373__auto__","cljs.core.async.chan","cljs.core.async.impl.dispatch/run","f__27374__auto__","switch__27303__auto__","state_28483","state_val_28484","inst_28477","cljs.core.async.impl.ioc-helpers/take!","inst_28479","inst_28480","inst_28481","cljs.core.async.impl.ioc-helpers/return-chan","statearr-28485","state-machine__27304__auto__","ret-value__27305__auto__","result__27306__auto__","cljs.core/keyword-identical?","ex__27307__auto__","e28486","statearr-28487","cljs.core/seq","statearr-28488","cljs.core/first","state__27375__auto__","statearr-28489","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","cljs_http.client.get","cljs.core.swap_BANG_","bydidriksson.app.state/state","cljs.core/assoc","bydidriksson.app.shop/render-item","item","cljs.core.get","cljs.core/deref","bydidriksson.app.config/configuration","clojure.string/upper-case","bydidriksson.app.shop/render-items","shop-items","cljs.core.map","bydidriksson.app.shop/shop-page"],"sourcesContent":["(ns bydidriksson.app.shop\r\n  (:require-macros [cljs.core.async.macros :refer [go]])\r\n  (:require [bydidriksson.app.config :as config]\r\n            [bydidriksson.app.state :as state]\r\n            [cljs-http.client :as http]\r\n            [clojure.core.async :refer [<!]]\r\n            [clojure.string :as string]))\r\n\r\n(def request-opts {:with-credentials? false\r\n                   :headers {\"Content-Type\" \"application/json\"}})\r\n\r\n(defn make-remote-call [endpoint]\r\n  (go (let [response (<! (http/get endpoint request-opts))]\r\n        (swap! state/state assoc :shop-items (:body response)))))\r\n\r\n(defn render-item [item]\r\n  ^{:key item}\r\n  [:a {:className \"lg:w-1/4 md:w-1/2 p-4 w-full\" :href (str \"/items/\" (get item :id))}\r\n   [:div {:className \"block relative h-48 rounded overflow-hidden\"}\r\n    [:img\r\n     {:alt \"ecommerce\",\r\n      :className \"object-cover object-center w-full h-full block\",\r\n      :src (str (:backend @config/configuration) \"/\" (get item :image))}]]\r\n   [:div {:className \"mt-4\"}\r\n    [:h3\r\n     {:className\r\n      \"text-gray-500 text-xs tracking-widest title-font mb-1\"}\r\n     (-> (get item :category) (string/upper-case))]\r\n    [:h2 {:className \"text-gray-900 title-font text-lg font-medium\"}\r\n     (get item :display-name)]\r\n    [:p {:className \"leading-relaxed mb-3\"} (get item :short-description)]\r\n    [:p {:className \"mt-1\"} (str (get item :price) \" kr\")]]])\r\n\r\n(defn render-items [shop-items]\r\n  (if (nil? shop-items)\r\n    (do\r\n      (make-remote-call (:backend @config/configuration))\r\n      [:p \"Loading items...\"])\r\n    (map render-item shop-items)))\r\n\r\n(defn shop-page []\r\n  [:section {:className \"text-gray-600 body-font\"}\r\n   [:div {:className \"container px-5 py-24 mx-auto\"}\r\n    [:div {:className \"flex flex-wrap -m-4 justify-center\"}\r\n     (render-items (:shop-items @state/state))]]])"]}