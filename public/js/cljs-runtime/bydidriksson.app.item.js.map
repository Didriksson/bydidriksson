{"version":3,"sources":["bydidriksson/app/item.cljs"],"mappings":"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","names":["bydidriksson.app.item/request-opts","bydidriksson.app.item/make-remote-call","endpoint","item","c__27348__auto__","cljs.core.async.chan","cljs.core.async.impl.dispatch/run","f__27349__auto__","switch__27303__auto__","state_31308","state_val_31311","inst_31293","cljs.core.async.impl.ioc-helpers/take!","inst_31296","inst_31303","inst_31304","cljs.core.async.impl.ioc-helpers/return-chan","statearr-31321","state-machine__27304__auto__","ret-value__27305__auto__","result__27306__auto__","cljs.core/keyword-identical?","ex__27307__auto__","e31323","statearr-31324","cljs.core/seq","statearr-31326","cljs.core/first","state__27350__auto__","statearr-31329","cljs.core.async.impl.ioc-helpers/USER-START-IDX","cljs.core.async.impl.ioc-helpers/run-state-machine-wrapped","cljs_http.client.get","cljs.core/reset!","bydidriksson.app.item/loading-component","bydidriksson.app.item/item-page","parameters","reagent.core.atom","cljs.core/deref","bydidriksson.app.config/configuration","cljs.core.get","clojure.string/upper-case","cljs.core.swap_BANG_","bydidriksson.app.state/state","cljs.core/update","cljs.core/conj","cljs.core/rand-int"],"sourcesContent":["(ns bydidriksson.app.item\r\n  (:require-macros [cljs.core.async.macros :refer [go]])\r\n  (:require [bydidriksson.app.config :as config]\r\n            [bydidriksson.app.state :as state]\r\n            [cljs-http.client :as http]\r\n            [clojure.core.async :refer [<!]]\r\n            [clojure.string :as string]\r\n            [reagent.core :as reagent :refer [atom]]))\r\n\r\n\r\n(def request-opts {:with-credentials? false\r\n                   :headers {\"Content-Type\" \"application/json\"}})\r\n\r\n(defn make-remote-call [endpoint item]\r\n  (go (let [response (<! (http/get endpoint request-opts))]\r\n        (reset! item (:body response)))))\r\n\r\n(defn loading-component []\r\n  [:section {:class \"text-gray-600 body-font overflow-hidden\"}\r\n   [:div {:class \"container px-5 py-24 mx-auto\"}\r\n    [:div {:class \"lg:w-4/5 mx-auto flex flex-wrap\"}\r\n     [:p \"Loading...\"]]]])\r\n\r\n(defn item-page\r\n  [parameters]\r\n  (let [item (atom nil)]\r\n    (make-remote-call (str (:backend @config/configuration) \"/\" (:id (:path parameters))) item)\r\n    (fn []\r\n      (if (nil? @item) [loading-component]\r\n          [:section {:class \"text-gray-600 body-font overflow-hidden\"}\r\n           [:div {:class \"container px-5 py-24 mx-auto\"}\r\n            [:div {:class \"lg:w-4/5 mx-auto flex flex-wrap\"}\r\n             [:img {:alt \"ecommerce\", :class \"lg:w-1/2 w-full lg:h-auto h-64 object-cover object-center rounded\", :src (str (:backend @config/configuration) \"/\" (get @item :image))}]\r\n             [:div {:class \"lg:w-1/2 w-full lg:pl-10 lg:py-6 mt-6 lg:mt-0\"}\r\n              [:h2 {:class \"text-sm title-font text-gray-500 tracking-widest\"} (-> (get @item :brand) (string/upper-case))]\r\n              [:h1 {:class \"text-gray-900 text-3xl title-font font-medium mb-1\"} (get @item :name)]\r\n              [:p {:class \"leading-relaxed\"} (get @item :description)]\r\n              [:div {:class \"flex mt-6 items-center pb-5 border-b-2 border-gray-100 mb-5\"}\r\n               [:div {:class \"flex ml-6 items-center\"}]]\r\n              [:div {:class \"flex\"}\r\n               [:span {:class \"title-font font-medium text-2xl text-gray-900\"} (str (get @item :price)) \" kr\"]\r\n               [:button {:class \"flex ml-auto text-white bg-indigo-500 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded\" :on-click #(swap! state/state update :cart conj {:id (rand-int 10000000) :item @item})} \"L\u00e4gg till i varukorg\"]]]]]]))))"]}